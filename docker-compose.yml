{
  "version": "3.9",
  "volumes": {
    "blog-db": null
  },
  "services": {
    "db": {
      "build": "./pg",
      "volumes": [
        "blog-db:/var/lib/postgresql/data"
      ],
      "ports": [
        "3001:5432"
      ],
      "environment": {
        "POSTGRES_USER": "admin",
        "POSTGRES_PASSWORD": "${BLOG_DB_PASSWORD?you must set an admin password}",
        "POSTGRES_DB": "blog"
      }
    },
    "server": {
      "build": ".",
      "ports": [
        "3000:8080"
      ],
      "environment": {
        "BLOG_DB_URL": "postgres://server:server@db:5432/blog"
      }
    }
  }
}
